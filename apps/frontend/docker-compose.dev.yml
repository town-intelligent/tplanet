version: "3.9"

services:
  tplanet-ai-dev:
    image: node:20-alpine
    container_name: tplanet-ai-dev
    working_dir: /app

    volumes:
      - .:/app
      - node_modules:/app/node_modules

    command: sh -c "npm install && npm run dev -- --host 0.0.0.0"

    ports:
      - "6176:5176"

    environment:
      # Vite 在 Docker / VM 上常需要 polling
      CHOKIDAR_USEPOLLING: "true"
      HOST: "0.0.0.0"
      VITE_API_LLMTWINS: "https://beta-llmtwins.ntsdgs.tw"
      VITE_HOST_URL_TPLANET: "https://beta-tplanet-backend.ntsdgs.tw"

    restart: unless-stopped

volumes:
  node_modules:
